version: '3.8'

services:
  dwh-sm2-devcontainer:
    container_name: dwh-sm2-devcontainer
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile
    volumes:
      - ..:/workspace
      - ~/.config/rclone:/home/vscode/.config/rclone  # Přidáno pro Rclone konfiguraci
      - ~/.gitconfig:/home/vscode/.gitconfig
      - ~/.ssh:/home/vscode/.ssh
    working_dir: /workspace
    tty: true
    stdin_open: true
    environment:
      - PYTHONUNBUFFERED=1
      - INFLUX_URL=http://influxdb:8086
      - DBT_PROFILES_DIR=/workspace
      - GIT_EDITOR=code --wait
    ports:
      - "8086:8086"
      - "8080:8080"  # Pro dbt docs
